(this["webpackJsonpreact-router-v6-auth-demo-updated"]=this["webpackJsonpreact-router-v6-auth-demo-updated"]||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(106),c=n(117),o=n(212),i=n(12),s=n(40),l=n(6),u=n(216),j=n(217),d=n(209),b=n(222),h=n(218),m=n(215),p=n(80),O=n.n(p),x=n(220),f=n(219),g=n(16),v=n(23),w=n(8),y=function(e,t){var n=Object(r.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):(window.localStorage.setItem(e,JSON.stringify(t)),t)}catch(r){return t}})),a=Object(w.a)(n,2),c=a[0],o=a[1];return[c,function(t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){}o(t)}]},k=n(70),T=n(1),C=Object(r.createContext)(),S=function(e){var t=e.children,n=e.userData,a=y("user",n),c=Object(w.a)(a,2),o=c[0],s=c[1],l=Object(i.p)(),u=function(){var e=Object(v.a)(Object(g.a)().mark((function e(t){var n,r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.stringify({identifier:t.email,password:t.password}),(r=new Headers).append("Content-Type","application/json"),fetch("http://168.138.70.111:1337/api/auth/local",{method:"POST",headers:r,body:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){e.error?(console.log(e.error),Object(k.b)("Ki\u1ec3m tra l\u1ea1i th\xf4ng tin \u0111\u0103ng nh\u1eadp")):(console.log(e),s(e),l("/dashboard/profile",{replace:!0}))})).catch((function(e){return console.log("error",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(v.a)(Object(g.a)().mark((function e(t){var n,r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.stringify({email:t.email,password:t.password,username:t.username}),(r=new Headers).append("Content-Type","application/json"),fetch("http://168.138.70.111:1337/api/auth/local/register",{method:"POST",headers:r,body:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){e.error?(console.log(e.error),Object(k.b)("Ki\u1ec3m tra l\u1ea1i th\xf4ng tin \u0111\u0103ng k\xfd")):(console.log(e),s(e),l("/dashboard/profile",{replace:!0}))})).catch((function(e){return console.log("error",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){s(null),l("/login",{replace:!0})},b=Object(r.useMemo)((function(){return{user:o,login:u,logout:d,register:j}}),[o]);return Object(T.jsx)(C.Provider,{value:b,children:t})},W=function(){return Object(r.useContext)(C)},I=function(){var e=W().login;return Object(T.jsx)(f.a,{component:"main",maxWidth:"xs",children:Object(T.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(T.jsx)(u.a,{sx:{m:1,bgcolor:"primary.main"},children:Object(T.jsx)(O.a,{})}),Object(T.jsx)(x.a,{component:"h1",variant:"h5",children:"\u0110\u0103ng nh\u1eadp"}),Object(T.jsxs)(m.a,{component:"form",onSubmit:function(t){t.preventDefault();var n=new FormData(t.currentTarget);e({email:n.get("email"),password:n.get("password")})},noValidate:!0,sx:{mt:1},children:[Object(T.jsx)(d.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(T.jsx)(d.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(T.jsx)(j.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"\u0110\u0103ng nh\u1eadp"}),Object(T.jsx)(h.a,{container:!0,children:Object(T.jsx)(h.a,{item:!0,children:Object(T.jsx)(s.a,{to:"/register",children:Object(T.jsx)(b.a,{href:"#",variant:"body2",children:"Ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? \u0110\u0103ng k\xfd ngay"})})})})]})]})})},P=(n(111),n(100)),D=n(208),L=n(213),A=n(211),F=n(116),J=n(4),N=n(221),E=Object(F.a)("http://168.138.70.111:1337",{}),H=A.a,q=(Object(J.a)(N.a)((function(e){var t=e.theme;return Object(P.a)(Object(P.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})})),function(){var e=r.useState(!1),t=Object(w.a)(e,2),n=t[0],a=t[1],c=r.useState(""),o=Object(w.a)(c,2),i=o[0],s=o[1],l=r.useState(!1),u=Object(w.a)(l,2),d=u[0],b=u[1],h=y("user",{}),m=Object(w.a)(h,2),p=m[0],O=(m[1],function(){a(!1)});return r.useEffect((function(){return d&&(E.on("message:create",function(){var e=Object(v.a)(Object(g.a)().mark((function e(t){var n;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create",t),n="|# ".concat(t.Phien,"|").concat(t.KetQua,"|T\u1ef7 l\u1ec7 ").concat(t.TyLe," %"),e.next=4,s(n);case 4:return e.next=6,a(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E.on("message:update",function(){var e=Object(v.a)(Object(g.a)().mark((function e(t){var n;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update",t),n="|# ".concat(t.Phien,"|").concat(t.KetQua,"|T\u1ef7 l\u1ec7 ").concat(t.TyLe," %"),e.next=4,s(n);case 4:return e.next=6,a(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),function(){E.off()}}),[d]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(D.a,{spacing:2,sx:{width:"100%"},children:[Object(T.jsxs)(D.a,{spacing:2,children:[Object(T.jsx)(j.a,{onClick:function(){if(!p.user.kichHoat)return s("Li\xean h\u1ec7 admin \u0111\u1ec3 k\xedch ho\u1ea1t"),void a(!0);d?(s("T\u1eaft tool  th\xe0nh c\xf4ng"),a(!0),b(!1)):(s("B\u1eadt tool th\xe0nh c\xf4ng"),a(!0),b(!0))},fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"TOOL T\xc0I X\u1ec8U TH\u01af\u1edcNG"}),Object(T.jsx)(j.a,{onClick:function(){s("S\xe1p ra m\u1eaft"),a(!0)},fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"TOOL T\xc0I X\u1ec8U VIP"}),Object(T.jsx)(j.a,{onClick:function(){s("S\xe1p ra m\u1eaft"),a(!0)},fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"TOOL HACK TI\u1ec0N"})]}),Object(T.jsx)(L.a,{open:n,autoHideDuration:15e3,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"center"},style:{marginTop:100},children:Object(T.jsx)(H,{onClose:O,severity:"success",sx:{width:"100%"},children:i})})]})})}),K=(n(113),n(225)),z=n(226),B=n(224),G=n(115),M=n(114),U=n.n(M),V=n(214),X=function(e){var t=e.pages,n=r.useState(null),a=Object(w.a)(n,2),c=a[0],o=a[1],s=Object(i.p)(),l=W(),u=l.user,d=l.logout,b=function(e){o(null),e&&s(e)};return Object(T.jsx)(K.a,{position:"static",children:Object(T.jsx)(f.a,{maxWidth:"xl",children:Object(T.jsxs)(z.a,{disableGutters:!0,children:[Object(T.jsx)(x.a,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}},children:"AI TOOL BOX"}),Object(T.jsxs)(m.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(T.jsx)(B.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(T.jsx)(U.a,{})}),Object(T.jsxs)(G.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(c),onClose:b,sx:{display:{xs:"block",md:"none"}},children:[null===t||void 0===t?void 0:t.map((function(e){return Object(T.jsx)(V.a,{onClick:function(){return b(e.path)},children:Object(T.jsx)(x.a,{textAlign:"center",children:e.label})},e.label)})),!!u&&Object(T.jsx)(V.a,{onClick:d,children:Object(T.jsx)(x.a,{textAlign:"center",children:"Logout"})},"logout")]})]}),Object(T.jsxs)(m.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:[null===t||void 0===t?void 0:t.map((function(e){return Object(T.jsx)(j.a,{onClick:function(){return b(e.path)},sx:{my:2,color:"white",display:"block"},children:e.label},e.label)})),!!u&&Object(T.jsx)(j.a,{onClick:d,sx:{my:2,color:"white",display:"block"},children:"logout"},"logout")]})]})})})},Q=function(){var e=W().user,t=Object(i.r)();return e?Object(T.jsxs)("div",{children:[Object(T.jsx)(X,{pages:[]}),t]}):Object(T.jsx)(i.b,{to:"/"})},R=(n(150),function(){var e=W().user,t=Object(i.r)();return e?Object(T.jsx)(i.b,{to:"/dashboard/profile",replace:!0}):Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{children:[Object(T.jsx)(X,{pages:[{label:"Login",path:"/login"}]}),t,Object(T.jsx)(k.a,{})]})})}),Y=(n(151),n(223)),Z=function(){var e=Object(i.r)(),t=Object(i.m)().userPromise;return Object(T.jsx)(r.Suspense,{fallback:Object(T.jsx)(Y.a,{}),children:Object(T.jsx)(i.a,{resolve:t,errorElement:Object(T.jsx)(A.a,{severity:"error",children:"Something went wrong!"}),children:function(t){return Object(T.jsx)(S,{userData:t,children:e})}})})},$=function(){var e=W().register;return Object(T.jsx)(f.a,{component:"main",maxWidth:"xs",children:Object(T.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(T.jsx)(u.a,{sx:{m:1,bgcolor:"primary.main"},children:Object(T.jsx)(O.a,{})}),Object(T.jsx)(x.a,{component:"h1",variant:"h5",children:"\u0110\u0103ng k\xfd"}),Object(T.jsxs)(m.a,{component:"form",onSubmit:function(t){t.preventDefault();var n=new FormData(t.currentTarget);e({email:n.get("email"),password:n.get("password"),username:n.get("username")})},noValidate:!0,sx:{mt:1},children:[Object(T.jsx)(d.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(T.jsx)(d.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0}),Object(T.jsx)(d.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(T.jsx)(j.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"\u0110\u0103ng k\xfd"})]})]})})},_=Object(s.b)(Object(i.k)(Object(T.jsxs)(i.c,{element:Object(T.jsx)(Z,{}),loader:function(){return Object(l.i)({userPromise:new Promise((function(e){return setTimeout((function(){var t=window.localStorage.getItem("user");e(t)}),500)}))})},children:[Object(T.jsxs)(i.c,{element:Object(T.jsx)(R,{}),children:[Object(T.jsx)(i.c,{path:"/",element:Object(T.jsx)(I,{})}),Object(T.jsx)(i.c,{path:"/login",element:Object(T.jsx)(I,{})}),Object(T.jsx)(i.c,{path:"/register",element:Object(T.jsx)($,{})})]}),Object(T.jsx)(i.c,{path:"/dashboard",element:Object(T.jsx)(Q,{}),children:Object(T.jsx)(i.c,{path:"profile",element:Object(T.jsx)(q,{})})})]}))),ee=document.getElementById("root"),te=Object(a.createRoot)(ee),ne=Object(c.a)({palette:{primary:{main:"#3a34d2"}}});te.render(Object(T.jsx)(r.StrictMode,{children:Object(T.jsx)(o.a,{theme:ne,children:Object(T.jsx)(i.e,{router:_})})}))}},[[152,1,2]]]);
//# sourceMappingURL=main.2dc30509.chunk.js.map